<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>Hawa co | Ø´Ø§Øª Ø­Ø¬Ø² Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª Ø£Ø¨Ùˆ Ø­ÙˆØ§</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
        :root {
            --bg: #05070a;
            --bg-soft: #0e1117;
            --bg-softer: #151924;
            --accent: #00b4d8;
            --accent-soft: rgba(0, 180, 216, 0.12);
            --text: #f8fafc;
            --text-muted: #9ca3af;
            --border: #1f2933;
            --danger: #f97373;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            padding: 16px;
        }

        .app {
            width: 100%;
            max-width: 480px;
            background: rgba(10, 12, 20, 0.96);
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 24px 60px rgba(15, 23, 42, 0.65);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            padding: 14px 16px 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #020617, #0b1220);
        }

        .logo-badge {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            background: radial-gradient(circle at 30% 0%, #38bdf8, #0f172a 60%, #000);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 16px;
            color: #e0f2fe;
            box-shadow: 0 0 18px rgba(56, 189, 248, 0.7);
        }

        .logo-badge span {
            letter-spacing: -1px;
        }

        .header-text {
            flex: 1;
        }

        .header-title {
            font-size: 15px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .header-title span.en {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
        }

        .header-subtitle {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .status-pill {
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(34, 197, 94, 0.4);
            color: #bbf7d0;
            background: rgba(21, 128, 61, 0.16);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
        }

        .chat {
            flex: 1;
            padding: 10px 12px 8px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%);
            scroll-behavior: smooth;
        }

        .bubble-row {
            display: flex;
            width: 100%;
        }

        .bubble-row.user {
            justify-content: flex-end;
        }

        .bubble-row.bot {
            justify-content: flex-start;
        }

        .bubble {
            max-width: 78%;
            padding: 8px 10px;
            border-radius: 14px;
            font-size: 13px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .bubble.bot {
            background: var(--bg-soft);
            border: 1px solid var(--border);
            border-bottom-left-radius: 4px;
        }

        .bubble.user {
            background: var(--accent-soft);
            border: 1px solid rgba(56, 189, 248, 0.5);
            color: #e0f2fe;
            border-bottom-right-radius: 4px;
        }

        .bubble small {
            display: block;
            margin-top: 4px;
            font-size: 10px;
            color: var(--text-muted);
        }

        .system-note {
            text-align: center;
            font-size: 11px;
            color: var(--text-muted);
            margin: 4px 0 2px;
        }

        .suggestions {
            padding: 0 10px 4px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: flex-start;
        }

        .suggestion-btn {
            border: 1px solid rgba(148, 163, 184, 0.4);
            border-radius: 999px;
            font-size: 11px;
            padding: 5px 9px;
            background: rgba(15, 23, 42, 0.9);
            color: var(--text-muted);
            cursor: pointer;
            transition: 0.15s;
        }

        .suggestion-btn:hover {
            border-color: var(--accent);
            color: #e5faff;
            background: rgba(8, 47, 73, 0.85);
        }

        .input-area {
            padding: 8px 10px 10px;
            border-top: 1px solid var(--border);
            background: linear-gradient(180deg, #020617, #020617f0);
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .input-row {
            display: flex;
            gap: 6px;
            align-items: flex-end;
        }

        textarea {
            flex: 1;
            resize: none;
            min-height: 40px;
            max-height: 100px;
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            padding: 8px 10px;
            font-size: 13px;
            background: var(--bg-softer);
            color: var(--text);
            outline: none;
        }

        textarea::placeholder {
            font-size: 12px;
            color: var(--text-muted);
        }

        textarea:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
        }

        .send-btn {
            border-radius: 999px;
            border: none;
            padding: 9px 14px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            background: linear-gradient(135deg, #0ea5e9, #22c55e);
            color: #0b1120;
            box-shadow: 0 8px 20px rgba(14, 165, 233, 0.5);
            white-space: nowrap;
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: default;
            box-shadow: none;
        }

        .send-btn span.icon {
            font-size: 14px;
            transform: translateY(1px);
        }

        .hint-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
            color: var(--text-muted);
        }

        .error {
            color: var(--danger);
        }

        @media (max-width: 480px) {
            .app {
                border-radius: 16px;
            }
            .header {
                padding-inline: 12px;
            }
            .chat {
                padding-inline: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="logo-badge">
                <span>Hc</span>
            </div>
            <div class="header-text">
                <div class="header-title">
                    <span>Hawa co</span>
                    <span class="en">â€¢ Abu Hawa Moto Assistant</span>
                </div>
                <div class="header-subtitle">
                    Ø´Ø§Øª Ø¨ÙˆØª Ù„Ø­Ø¬Ø² Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª Ø£Ø¨Ùˆ Ø­ÙˆØ§ ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª
                </div>
            </div>
            <div class="status-pill">
                <span class="status-dot"></span>
                Ù…ØªØµÙ„
            </div>
        </header>

        <div id="chat" class="chat">
            <div class="system-note">
                Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ø­Ø¶Ø±ØªÙƒ ğŸ‘‹<br />
                Hawa co ØªØ­Øª Ø£Ù…Ø± Ø­Ø¶Ø±ØªÙƒ ÙÙŠ Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø£Ø¨Ùˆ Ø­ÙˆØ§.
            </div>
            <div class="bubble-row bot">
                <div class="bubble bot">
                    Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø­Ø¶Ø±ØªÙƒ ÙÙŠ Hawa co ğŸ¤<br />
                    Ø­Ø¶Ø±ØªÙƒ Ø­Ø§Ø¨Ø¨ ØªØ­Ø¬Ø² Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„ ÙˆÙ„Ø§ Ø¨Ø³ ØªØ³ØªÙØ³Ø± Ø¹Ù† Ù…ÙˆØ¯ÙŠÙ„ Ø£Ùˆ Ù…ÙˆØ§ØµÙØ§ØªØŸ ğŸ™‚âœ¨
                </div>
            </div>
        </div>

        <div class="suggestions">
            <button class="suggestion-btn" data-text="Ù…ÙˆØ§ØµÙØ§Øª 703 rr">
                Ù…ÙˆØ§ØµÙØ§Øª 703RR
            </button>
            <button class="suggestion-btn" data-text="Ù…ÙˆØ§ØµÙØ§Øª 703f">
                Ù…ÙˆØ§ØµÙØ§Øª 703F Ø£Ø¯ÙÙ†Ø´Ø±
            </button>
            <button class="suggestion-btn" data-text="Ù…ÙˆØ§ØµÙØ§Øª Dayun 200">
                Ù…ÙˆØ§ØµÙØ§Øª Dayun 200
            </button>
            <button class="suggestion-btn" data-text="Ù…ÙˆØ§ØµÙØ§Øª CMG TIGER">
                Ù…ÙˆØ§ØµÙØ§Øª CMG TIGER
            </button>
            <button class="suggestion-btn" data-text="Ø´ÙƒØ±Ø§Ù‹ ÙŠØ§ Hawa co â¤ï¸">
                Ø±Ø³Ø§Ù„Ø© Ø´ÙƒØ± â¤ï¸
            </button>
        </div>

        <div class="input-area">
            <div class="input-row">
                <textarea
                    id="messageInput"
                    rows="1"
                    placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦ (Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Shift+Enter Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯)"
                ></textarea>
                <button id="sendBtn" class="send-btn">
                    <span class="icon">â¤</span>
                    Ø¥Ø±Ø³Ø§Ù„
                </button>
            </div>
            <div class="hint-row">
                <span>Ù„Ø§ ÙŠØªÙ… Ø·Ù„Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ Ø£Ùˆ Ù…Ø§ÙŠÙƒ Ø£Ùˆ Ù„ÙˆÙƒÙŠØ´Ù† Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§ âœ…</span>
                <span id="status" class=""></span>
            </div>
        </div>
    </div>

    <script>
        const chatEl = document.getElementById("chat");
        const inputEl = document.getElementById("messageInput");
        const sendBtn = document.getElementById("sendBtn");
        const statusEl = document.getElementById("status");
        const suggestionButtons = document.querySelectorAll(".suggestion-btn");

        // Ù‡Ù†Ø­ØªÙØ¸ Ø¨Ø§Ù„Ù‡ÙŠØ³ØªÙˆØ±ÙŠ Ø²ÙŠ Ù…Ø§ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…Ø³ØªÙ†ÙŠ
        const history = [];

        function appendMessage(role, text) {
            const row = document.createElement("div");
            row.className = "bubble-row " + (role === "user" ? "user" : "bot");

            const bubble = document.createElement("div");
            bubble.className = "bubble " + (role === "user" ? "user" : "bot");
            bubble.textContent = text;

            row.appendChild(bubble);
            chatEl.appendChild(row);
            chatEl.scrollTop = chatEl.scrollHeight;
        }

        async function sendMessage(text) {
            const message = text.trim();
            if (!message) return;

            // Ø¶ÙŠÙ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            appendMessage("user", message);
            inputEl.value = "";
            inputEl.style.height = "40px";

            // Ø­Ø¯Ù‘Ø« Ø§Ù„Ø³ØªØ§ØªØ³
            statusEl.textContent = "Ø¬Ø§Ø±Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©â€¦";
            statusEl.classList.remove("error");

            sendBtn.disabled = true;

            // Ù†Ø¨Ù†ÙŠ history Ø¨Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± Ù…ØªØ¹ÙˆØ¯ Ø¹Ù„ÙŠÙ‡
            history.push({ role: "user", content: message });

            try {
                // Ù„Ùˆ Ø§Ù„ØµÙØ­Ø© Ø¨ØªØªÙØªØ­ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† Ø¨ØªØ§Ø¹ Ø§Ù„Ø³ÙŠØ±ÙØ±
                // Ø§Ø³ØªØ®Ø¯Ù… "/chat" Ù…Ø¨Ø§Ø´Ø±Ø©
                const res = await fetch("/chat", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ message, history })
                });

                if (!res.ok) {
                    throw new Error("HTTP " + res.status);
                }

                const data = await res.json();
                const reply = data.reply || "ÙÙŠ Ù…Ø´ÙƒÙ„Ø© ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©ØŒ Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ Ø¨Ø¹Ø¯ Ø´ÙˆÙŠØ© ğŸ™‚âœ¨";

                history.push({ role: "assistant", content: reply });
                appendMessage("assistant", reply);
                statusEl.textContent = "ØªÙ… Ø§Ù„Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­ âœ…";
            } catch (err) {
                console.error(err);
                statusEl.textContent = "Ø­ØµÙ„Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±ØŒ ØªØ£ÙƒØ¯ Ø¥Ù†Ù‡ Ø´ØºØ§Ù„.";
                statusEl.classList.add("error");
                appendMessage(
                    "assistant",
                    "â€¦ ÙÙŠ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø­Ø§Ù„ÙŠÙ‹Ø§ØŒ Ù…Ù† ÙØ¶Ù„Ùƒ ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ø´ØºØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙˆØ±Øª 3000 Ø«Ù… Ø¬Ø±Ù‘Ø¨ ØªØ§Ù†ÙŠ ğŸ™‚âœ¨"
                );
            } finally {
                sendBtn.disabled = false;
            }
        }

        // Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        sendBtn.addEventListener("click", () => {
            sendMessage(inputEl.value);
        });

        // Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ â€“ Shift+Enter Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯
        inputEl.addEventListener("keydown", (e) => {
            if (e.key === "Enter" && !e.shiftKey) {
                e.preventDefault();
                sendMessage(inputEl.value);
            }
        });

        // Auto-grow Ù„Ù„Ù€ textarea
        inputEl.addEventListener("input", () => {
            inputEl.style.height = "40px";
            inputEl.style.height = inputEl.scrollHeight + "px";
        });

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª
        suggestionButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
                const text = btn.getAttribute("data-text");
                sendMessage(text);
            });
        });
    </script>
</body>
</html>